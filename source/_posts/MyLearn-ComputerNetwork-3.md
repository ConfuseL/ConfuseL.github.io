---
title: <学习记录>《图解TCP/IP》之IP协议
date: 2019-4-6 1:25:21
tags: 知识总结
categories: 计算机网络
copyright: true
keywords: [IP协议,计算机网络,基础知识]
description: 本篇总结了IP协议的主要功能和它的规范。
---
# IP协议

## 网络层的作用

> IP协议运作于网络层，它的底层是数据链路层。数据链路层的作用是在两个物理设备之间传输数据，而IP协议就是两台主机之间通信，期间可能会经过很多台物理设备的转发。
>
> 书上用旅游的例子来说明：
>
> ​	去异国旅游，我们去旅行社购买一整套的服务，旅行社说，需要先坐飞机到外国，然后坐火车到某个城市，再坐公交到具体的目的地。
>
> 仔细去揣摩，坐飞机、坐火车、坐公交都某个区间内的移动方式，坐飞机需要的飞机票、坐火车的火车票和公交车的票(当作有)。这些票据上面都注明了目的地和源地点(从x到y)，联想到数据链路层的作用，即在上层的数据中加上自己的首部数据：源和目的MAC地址。
>
> 可以发现，数据链路层都是将整个旅行路线分成一小块，从而执行一小块的任务。
>
> 那么这整个旅行路线(行程表)就是网络层的作用。
>
> **计算机网络中需要数据链路层和网络层这个分层才能实现向最终目的地址的通信。**

## IP基础知识

### 面向无连接的ip协议

> ip协议不是面向连接的，它不需要两个主机之间建立网络连接。
>
> 为何是面向无连接？
>
> 1. 为了简化，如果每一次调用ip协议都需要建立连接实在太繁琐了。
> 2. 为了提速，建立连接必然造成处理速度的下降。
>
> 大家都知道，面向无连接是不可靠且不安全的，如果有需要，就得需要上一层的实现(TCP协议)。

### 路由控制

> 数据链路层会将数据发给下一个物理设备，但是ip首部数据只有ip地址，数据链路层的首部数据只有目的物理设备的mac地址做为参照，那么数据到达下一个物理设备的时候，谁告诉它相对下一个物理设备在哪呢。
>
> 这就需要路由控制去解决了。
>
> 路由器(物理设备)中的内存存储着路由表，它记录着到达目的地需要转跳的下一个物理设备的位置信息（拓扑结构）。
>
> 数据包到达路由器的时候，路由器分析IP地址，然后找到一条最佳的数据链路，将数据包发过去。

### IP地址

> ip地址属于网络层地址，在数据链路层传输数据的过程中不需要重新设置ip地址，只需要将ip地址转换成比特流或者对帧数据进行转发即可。

#### ip地址的定义

> ipv4地址由32位01整数来表示。然后每8位为一组。通常每组以10进程的形式表示。如常见的本机局域网地址：192.168.1.1。
>
> 2^32很大，所以最多允许2的32次方个计算机连接到网络。当然实际上不会有那么多计算机同时联网。

#### ip地址的组成

> 一个ip地址其实是由**网络标识**和**主机标识**组成，简单来说，在同一个网络端下拥有多个主机，这里面的每一个主机的网络标识都是一样的，知识主机标识不一样，在这里通过主机标识区分。
>
> 例如局域网，都是192.168.1.x。x则是主机标识。
>
> 那么用什么来区分一个ip地址的哪一部分是网络标识和主机标识呢。

#### 子网掩码

> 子网掩码的格式和ip地址的格式一样，都是32位01整数组成，将子网掩码与ip地址与运算节能得到这个ip地址的网段。

> 