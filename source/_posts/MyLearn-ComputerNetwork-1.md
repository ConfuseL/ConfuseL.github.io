---
title: <学习记录>《图解TCP/IP》之网络基础知识
date: 2019-3-31 14:11:21
tags: 知识总结
categories: 计算机网络
copyright: true
keywords: [计算机网络,基础知识]
description: 阅读《图解TCP/IP》一书第一章的总结，不总结一些偏物理层面的知识。
---
## 计算机中的协议

### 什么是协议

> 简单来说，协议就是计算机与计算机之间通过网络实现通信时事先达成的一种约定。
>
> 书中有一段例子，即：
>
> - 人们沟通用的语言当作“协议”
> - 聊天当作“通信”
> - 说话的内容当作“数据”
>
> 但是计算机并没有人类那么智能  ，人类在聊天(通信)时不需要特别注意就能自然的吐字、发音(写数据)和听懂对方的语言(数据解析)。但是计算机不会，因此需要我们提前指定好这个协议。让计算机根据这个协议，去正确的读取和发送数据。

![](http://confusel-images.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BA%93/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%8D%8F%E8%AE%AE%E4%B8%BE%E4%BE%8B.png)

### 协议的作用

> 让不同的设备、CPU以及不同的操作系统组成的计算机之间遵循相同的协议以能够实现通信。可以理解为通信时，两个计算机的语言，只有语言相同，两个计算机太能听懂(此语言只是举例，不指编程语言)。

### 分组交换技术

> 分组交换是指把大数据分割成多个小的包裹(packet)，随后再进行传输。
>
> 就类似于邮局发货，对于每一个包，都需要标识好发送人的信息和接受人的信息（源地址和目的地址），这样才能保证货物能够在正确的路线上传递。
>
> 原文中翻译为分组交换协议，感觉称为技术更合适，因为觉得这个 协议 两字有一点容易让人把后面学习的TCP/IP协议的 协议 混淆，因为TCP/IP使用的正是分组交换技术，所以在这里改为技术。

![](https://confusel-images.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BA%93/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2.png)

## 协议分层与OSI参考模型

### 协议分层

> 国际标准化组织，根据通信协议中必要的功能分层了7个层次，而这个7个层次组成了一个模型。即OSI模型。
>
> 在这个模型中，每一层次都要接受它下一层提供的服务，同时为自己上一层提供服务。
>
> 不同层次交互时遵行的约定叫做“接口”，相同层次交互式的约定叫做“协议”。

![](https://confusel-images.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BA%93/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%8D%8F%E8%AE%AE.png)

### OSI参考模型

> 如上所述，国际标准化组织将协议分为了7个层次，从底层到上层，为别是：
>
> 物理层->数据链路层->网络层层->传输层->会话层->表示层->应用层。
>
> 其中七层的作用如下图。

![](http://confusel-images.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BA%93/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/OSI%E4%B8%83%E5%B1%82%E4%BD%9C%E7%94%A8.png)

> 发送方调用的顺序是从上到下，接受方则相反，从下到上。
>
> 以发送邮件简单举例，发送方A想对接受方B发送一封信，那么发送方在写完信，在邮箱网页上点击了发送按钮的那一刻，我们的信件便进入了应用层。
>
> 1. 应用层：我们的应用层知道这是一封电子邮件，选择一个适合的应用层协议:SMTP协议(先不用管它，知道它是一个发送邮件的协议就好了)，然后把这封电子邮件变成一个包裹，包的首部写了邮件的信息以及收件人。随后开始调用下一层的接口。
> 2. 表示层：接受到应用层的调用，表示层先将包裹分析一边，为了保证数据格式一致性，把邮件中的信息转换为网络通用的标准数据格式，同时加上一段首部信息，标识这个数据原来的格式。转换好之后，调用下一层的接口。
> 3. 会话层：会话层拿到包裹后，开始决定采用哪一种链接方式，对多个邮件是连续发呢还是一次性发完呢。在首部也添加了该层的信息：数据传输的顺序。随后调用下一层的接口。
> 4. 传输层：这应该就是这本书的重点啦，这一层有TCP和UDP协议，如果选择了TCP协议，我们将建立起双方的可靠链接，反之UDP将不面向连接。此外还要进行传输前的错误检测和流控。随后数据开始经过网络层。
> 5. 网络层：网络层的主要功能即是提供路由，即选择到达目标主机的最佳路径，并沿该路径传送数据包。除此之外，网络层还要能够消除网络拥挤，具有流量控制和拥挤控制的能力。选择了最佳的线路之后，开始进入数据链路层。
> 6. 数据链路层：该层的数据传输单位是帧，将经过上面五层操作后的邮件的数据组合成一帧一帧的数据，开始传递给物理层。
> 7. 物理层：这是最低的一层了，在这里我们把帧数据编程0101的比特，然后经过光纤啊、电缆啊、wifi啊等物理设施传输到对方对应的物理设施中。
>
> 在发送方A点击发送后的几秒内，以上操作很可能已经完成了，而接受方B的物理层也开始接受到0101的比特数据，然后从下层到上层逐个分析，在传输层使用了对应的TCP/UDP接受数据，在会话层按顺序排序数据，在表示层解码数据，在应用层把邮件放到接受方B的邮箱中，如果邮箱满了，这时候我们又会发送一条错误给发送方A，这个时候又类似发送了一封邮件，只不过发送者不再是A而是B了。

## 传输方式的种类

### 面向连接与面向无连接

#### 面向连接

> 即双方的通信要建立在连接上。比如打电话，需要向对方拨号，而对方也必须在接通之后，两个人才能通话，这个过程就是建立连接。如果两个人其中一个人挂了电话，那么就无法在通讯，也就是连接被切断了。
>
> TCP协议就是面向链接。

#### 面向无连接

> 双方的通信不需要连接。比如寄快递，我只需要将货物给邮寄公司，填写好对方信息就好了，当包裹到对方地址的时候，对方去查收就好。
>
> UDP协议就是面向无连接。

### 电路交换与分组交换

#### 电路交换

> 从名字上很容易理解，也就是发送方和接受方通过一条电路传递数据，如果停止传递，那么电路断开（不要和上面的面向连接搞混了，这里的电路是单独的物理通路)。
>
> 及时通信电路空闲，其他用户无法使用。
>
> 举个例子，看过一些记录背景为上时代的电影，会有过打电话的不少镜头，主角打电话给某人，然后某中继接通了电话，主角说，帮我接通B，然后中继将线路搭给了B，这时候两个人才能通话。

#### 分组交换

> 上面介绍过分组交换，这里不再介绍，在此说一下它的好处。
>
> 电路交换缺点很明显，两个人只要通信就占用一条物理道路，多不方便啊。但是分组交换的话，让每个人的通信数据变成一段一段的，大家一起使用一条或者多条物理道路(分组流水线)，这样道路的利用率就大大提高了。

### 单播，广播，多播，任播

#### 单播

> 一对一的通信，就如上面的固定电话。

#### 广播

> 一对多的通信，比如电视观看节目，信号源向各家各户发送。

#### 多播

> 和广播类似，但是接受方是指定的，不是广播距离的看电视一样，想看就能看，在多播中，是被规定好接受方的。比如群内视频，是由群里的成员可以加入。

#### 任播

> 一台发送方主机从台接受方主机中选择接送方。与多播不同的是，它只能选择一个而不是多个。
>
> 看似一对多，其实还是一对一，只不过拥有了选择的对象。
>
> 就像老师(发送方)叫同学们(多个主机)回答问题，一般选择睡觉(指定的接受方)的那个。。。
>
> 域名解析就是任播，我们解析域名，从ip表中找到它真正对应的ip地址。

## 地址

### 什么是地址

> 地址当然是记录某个事物当前处于的位置啦，在通信传输中，地址是具有唯一性的，一个地址只能指明一个事物，这其实和变成里的指针一个性质。
>
> 但是指名的事物并不代表只是一个个体，也有可能是一个团体，就像C++中某个指针指向了一个类的对象，而这个对象中又有各个成员变量。这个指针指向了一个对象，尽管这个对象中有多个成员，但这个对象依然是唯一的。
>
> 如下图，书上举了一个老师点名的例子。虽然地址指向的都可能是个群体，但是这些群体依然是唯一的。

![](https://confusel-images.oss-cn-shenzhen.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BA%93/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E5%9C%B0%E5%9D%80%E5%94%AF%E4%B8%80%E6%80%A7.png)

### 地址的分类

> 这里的分类不是编程中的int指针、char指针，而是不同协议的使用的地址。

#### MAC地址

> 简单理解为电脑里网卡的唯一标识符。

#### IP地址

> 一个网络对应一台主机的地址，一个ip对应一个主机。各运营商有各自的ip范围。

#### 端口号

> 你的电脑分配给某个进程的通信号，其他电脑可以通过端口号，与你电脑中对应的进程进行通信。

## 总结

> 第一章主要是介绍了通信的协议、还有数据传输的几种类型以及地址。
>
> 其实还有网关和中继器、交换机等一些偏物理的知识，只不过我就不总结了，因为做软件比较偏向传输层以上，这里仅仅看过当作了解。
>
> 这一章只是进入计网世界的预热。下一章的内容是TCP/IP的基础知识，即将进入这本书的正题。